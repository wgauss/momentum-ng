<!-- 
TODO:
	implement each button and make it make sense
	plan how a decent flow is that's logical
	Schedule Component: 
On naming event make sure we can pull different props of available events on look up.
Ability to schedule x amount (seconds, minutes, hours, days, months, years, decades) of time from x date, whether or not its recurring based on daily, weekly, monthly (number), x months, yearly (month,day). Within a group. Reminders (use toast). 
Start time - end time

The dropdown: view events for day, add event, remove event, remove all events (if available) look into nested drop downs and styling it so it doesn't look like dog shit


-->

<ng-template #addEvent let-modal>
	<div class="modal-header">
		<h4 class="modal-title">Add Event (from schedule component)</h4>
		<button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
	</div>
	<div class="modal-body justify-center">
		<div style="display: flex;">
			<input type="text" class="w-full" placeholder="Title*" />
			<input type="month" placeholder="Location" /><!-- ability to choose your own location or on a map -->
			<button class="buttonFull">Map</button>
		</div>
		<textarea style="width: 100%; overflow-y: scroll; height: 150px;" type="text" placeholder="Description" ></textarea>
		<hr/>
		<p>Time | Date</p>
		All Day? <input type="checkbox" (change)="setAllDayFlag()"/>
		<!-- timeInputContainerDiv will be in clock / time picker component -->
		<div class="timeInputContainer" *ngIf="allDayFlag">
			<div class="timeFromContainer">
				<p style="padding-top: 5px;">From : &nbsp;</p>
				<input class="timeInput" id="hourFrom" type="number" min="0" max="24"  placeholder="HH"/>
				<p>&nbsp;:&nbsp;</p>
				<input class="timeInput" id="minuteFrom" type="number" min="0" max="60"  placeholder="MM"/>
			</div>
			<div class="timeToContainer">
				<p style="padding-top: 5px;">To : &nbsp;</p>
				<input class="timeInput" id="hourTo" type="number" min="0" max="24"  placeholder="HH"/>
				<p>&nbsp;:&nbsp;</p>
				<input class="timeInput" id="minuteTo" type="number" min="0" max="60"  placeholder="MM"/>
			</div>
		</div>
		<div class="timePickerContainer" *ngIf="allDayFlag" [style.height.px]="clockHeight">
			<div class="clock-container">
				<div class="hour-numbers">
					<div *ngFor="let number of hourNumbers" class="hour-number" [ngStyle]="{'transform': 'rotate(' + number.deg + 'deg) translateY(-' + radiusHour + 'px)'}" (click)="insertHour($event)">{{number.label}}</div>
				</div>
				<div class="minute-numbers">
					<div *ngFor="let number of minuteNumbers" class="minute-number" [ngStyle]="{'transform': 'rotate(' + number.deg + 'deg) translateY(-' + radiusMinute + 'px)'}" (click)="insertMinute($event)">{{number.label}}</div>
				</div>
			</div>	
		</div>
		<hr/>
		<p>Reccuring? <input type="checkbox" (change)="setReccuringFlag()"/>&nbsp;<select [disabled]="reccuringFlag" (change)="setRecurringType($event)">
			<option value="1" selected>Everyday</option>
			<option value="2">Weekday</option>
			<option value="3">Custom</option>
		</select></p>
		<div *ngIf="reccuringType == '1'">

		</div>
		<div *ngIf="reccuringType === '2' && !reccuringFlag">
			Every &nbsp;
			<select>
				<option value="Sunday">Sunday</option>
				<option value="Monday">Monday</option>
				<option value="Tuesday">Tuesday</option>
				<option value="Wednesday">Wednesday</option>
				<option value="Thursday">Thursday</option>
				<option value="Friday">Friday</option>
				<option value="Saturday">Saturday</option>
			  </select>
		</div>
		<div *ngIf="reccuringType == '3' && !reccuringFlag">
			<span>Every &nbsp;</span>
			<input type="number" [disabled]="reccuringFlag"/>&nbsp;<select [disabled]="reccuringFlag">
				<option>seconds</option>
				<option>Hours</option>
				<option selected>Days</option>
				<option>Months</option>
				<option>Years</option>
			</select>
		</div>
		<hr/>
		<p>Reminder(s)? <input type="checkbox" (change)="setReminderFlag()"/></p>
		
		<div *ngIf="!reminderFlag">
			<input type="number" [disabled]="reminderFlag"/>&nbsp;<select [disabled]="reminderFlag">
				<option>seconds</option>
				<option>Hours</option>
				<option selected>Days</option>
				<option>Months</option>
				<option>Years</option>
			</select>
			<span>&nbsp;Before</span>
			<button class="buttonFull" [disabled]="reminderFlag">Add</button>
		</div>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-secondary" (click)="modal.close('Close click')">Close</button>
	</div>
</ng-template>

<ng-template #content let-modal>
	<div class="modal-header">
		<h4 class="modal-title">{{event.title}} | {{event.date}}</h4>
		<button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
	</div>
	<div class="modal-body">
		<p>{{event.desc}}</p>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-secondary" (click)="modal.close('Close click')">Close</button>
	</div>
</ng-template>

<div class="calendar-container">
	<div class="top-display-container">
	  <div>
		<div class="topDisplay">
			<button (click)="changeMonth(-1)" class="buttonFull">←</button>
			<span></span>
			<select >
				<option selected>{{ displayMonth }}</option>
			</select>
			<button (click)="changeMonth(1)" class="buttonFull">→</button>
		</div>
		<hr/>
		<div class="topDisplay">
			<button (click)="changeMonth(-12)" class="buttonFull">←</button>
			<input [value]="currentDate.getFullYear()" (change)="onYearChange($event)" class="year-input" />
			<button (click)="changeMonth(12)" class="buttonFull">→</button>
		</div>
		<div class="topDisplay" *ngIf="!isCurrentDate(referenceDate)">
			<button (click)="changeToCurrentDay()" class="buttonGhost">Go To Current Day</button>
		</div>
	  </div>
	</div>
	<div class="weekdays">
	  <div *ngFor="let day of weekdays" class="weekday">{{ day }}</div>
	</div>
	<div class="calendar">
	  <div *ngFor="let week of calendar" class="calendar-week">
		<div *ngFor="let day of week" class="calendar-day" [style.height.px]="computedHeight" >
			<div class="calendar-top-bar">
				<span class="calendar-number" *ngIf="day.toLocaleDateString() != referenceDate.toLocaleDateString()">{{ formatDay(day) }}</span>
				<span  class="today" *ngIf="day.toLocaleDateString() == referenceDate.toLocaleDateString()">{{ day.toLocaleDateString() }} &nbsp; <i>Today</i></span>
				<span ngbDropdown placement="top-end" class="d-inline-block">
					<button id="dropdownBasic2" ngbDropdownToggle></button>
					<div ngbDropdownMenu aria-labelledby="dropdownBasic2">
						<button ngbDropdownItem (click)="createEventModal(addEvent)" class="dropDownItem">Add Event</button>
					</div>
				</span>
			</div>
			<div style="display: flex; justify-content: center;">
				<div style="height: 3px; border-radius: 5px; width: 95%; background-color: rgb(73, 70, 70);"></div>
			</div>
			<div class="calendarEventsForDay" [style.height.px]="computedHeight - 29.5">
				<div *ngFor="let event of events">
					<div *ngIf="checkEventDay(event, day)">
						<div class="event">
							<div class="btn-group me-3 block">
								<div class="btn-group" ngbDropdown role="group" aria-label="Button group with nested dropdown" class="event" [ngStyle]="{ 'background-color': event.color }" ngbDropdown container="body">
									<div *ngIf="event.startTime">
										<span>{{event.startTime}} - {{event.endTime}}</span>
										<hr style="margin: 0;"/>
									</div>
									<div style="display: flex; justify-content: space-between;">
										<button type="button" class="eventTitle" (click)="openEventModal(content, event)">{{event.title}}</button>
										<button type="button" class="buttonGhost dropdown-toggle-split" ngbDropdownToggle></button>
									</div>
									<div class="dropdown-menu" ngbDropdownMenu>
										<button ngbDropdownItem class="dropDownItem" (click)="openEventModal(content, event)">Edit</button>
										<button ngbDropdownItem class="dropDownItem">Duplicate</button>
										<button ngbDropdownItem class="dropDownItem">Move</button>
										<div class="dropdown-divider"></div>
										<button ngbDropdownItem class="dropDownItem">Delete</button>
									</div>
								</div>
							</div>
							<div class="eventDesc" *ngIf="range <= 3">
								<hr style="margin: 0; margin-bottom: 5px;"/>
								{{event.description}}
							</div>
						</div>
					</div>
				</div>
			</div>
			
		</div>
	  </div>
	  <div class="topDisplay">
		<input type="number" min="1" max="5" [value]="range" (change)="onRangeChange($event)" class="year-input"/>
	  </div>
	</div>
  </div>